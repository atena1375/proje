<html>
  <head>
    <link rel="stylesheet" href="assets/css/w3.css" />

    <script src="assets/js/jquery.min.js"></script>
  </head>
  <body>
    <div class="w3-bar w3-teal">
      <div class="w3-bar-item">Student Application</div>
    </div>
<div>
    <table id="stdtable" class="w3-table-all">
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Family</th>
      </tr>
    </table>
    <form style="display:none;" id="formshow"  >
      <input type="text" id=yek  />
      <input type="text" id=do />
    
    </form>
    <input style="display:none;" id="g" />
    <button style="display:none;" id="virayesh">virayesh</button>
  </div>
    <script>
      $(document).ready(function() {
        $.ajax({
          url: "http://localhost:5000/api/student",
          method: "get",
          success: function(data) {
            $.each(data, function(index, item) {
              var tr = $("<tr>").append(
                $("<td>").text(item.studentId),
                $("<td>").text(item.name),
                $("<td>").text(item.family),
                $("<td>").append($("<button>").append("show").click(function(){
                    $("#formshow").show();
                    $("#virayesh").show();
                    var myvirayesh=$("#virayesh");
                    var a=item.studentId;
                  // document.getElementById("g").innerHTML= a;
                  $("#g").val(a);
                    $.ajax({
                    url: "http://localhost:5000/api/student/"+item.studentId,
                     method: "get",
                    success: function(data) {
                    $.each(data, function(index, item) {
                      
                    $("#yek").val( data.name),
                    $("#do").val(data.family)
                     });
                   },
                      error: function(err) {
                      console.log(err.status);
                   }
                   });
                 // myvirayesh.click(function sa(a){});
                  })),
                $("<td>").append($("<button>").append("delete").click(function(){
                    $.ajax({
                    url: "http://localhost:5000/api/student/delete/"+item.studentId,
                     method: "Delete",
                    success: function(data) {
                    $.each(data, function(index, item) {
                    tr = $("<tr>").append(
                    $("<td>").text(item.studentId),
                    $("<td>").text(item.name),
                    $("<td>").text(item.family)
                     ) ;
                   $("#stdtable").empty();
               // location.href=location.href;
                     $("#stdtable").append(tr);
                  
                     });
                   },
                 error: function(err) {
                 console.log(err.status);
              },
               error: function(err) {
               console.log(err.status);
            }
          });
                  }))
                  

              );
              $("#stdtable").append(tr);
            });
          },
          error: function(err) {
            console.log(err.status);
          }
        });
      //  function sa(a){
      var myvirayesh=$("#virayesh");
      
        
        myvirayesh.click(function(){
        var myInput = $("#g").val();
       var myname=$("#yek").val();
        var myfamily=$("#do").val();
        var er=$("#textshow").val();
         $.ajax({
          url: "http://localhost:5000/api/student/update/"+ myInput ,
          method: "Put",
          data:{
            "id": myInput,
            "name":myname,
            "family":myfamily
          },
          success: function(data) {
            $.each(data, function(index, item) {
             var t = $("<tr>").append(
                $("<td>").text(item.studentId),
                $("<td>").text(item.name),
                $("<td>").text(item.family)
              ) ;
             
              $("#stdtable").append(t);
             });
           },
           error: function(err) {
            console.log(err.status);
          }
        });
         
      
        });
      });
    </script>
  </body>
</html>
